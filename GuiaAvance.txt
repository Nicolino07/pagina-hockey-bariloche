Ya podemos usar services de club, equipo y persona. 
estoy arreglando services de planteles.
se puede crear un plantel pero no podemos agregar un integrante a un plantel
comprobacion de genero en equipo/plantel/plantel_integrante LISTO


AVANCE: carga de partido con goles y tarjetas funcionando, inicializacion de tabla de
posiciones en 0 funcionando (detecta inscripcion),  
Inicio de sesion y acceso a Panel principal listo
pagina de clubes y equipos admin lista(casi)
creando pagina admin para torneos

PROXIMO: error el 409 Conflict persiste incluso con un fichaje "limpio" (ID 49).
 Si esa persona no está en un plantel, el conflicto tiene que estar en la base de datos,
  específicamente en cómo estamos enviando la fecha o cómo el backend está procesando el 
  booleano activo.

Ese error suele saltar cuando una restricción CHECK de SQL dice: "No, esto que intentas 
guardar rompe mis reglas".

Sospechosos principales:
Formato de Fecha: SQL a veces es quisquilloso con las strings de fecha.

La restricción CHECK: Si el backend actualiza la fecha pero no el campo activo (o viceversa),
 la base de datos rechaza el cambio.

Hagamos una prueba de "Fuerza Bruta" para entender el error
Vamos a modificar tu función en el Backend (Python/FastAPI) para ver qué está pasando.
Lo más probable es que necesites asegurar que ambos campos cambien en la misma transacción:




vista GENERO/EQUIPO/NOMBRE
SELECT e.genero, e.nombre as equipo, per.nombre as jugador
FROM equipo e 
JOIN plantel pl ON e.id_equipo = pl.id_equipo
JOIN plantel_integrante pi ON pl.id_plantel = pi.id_plantel
JOIN persona per ON per.id_persona = pi.id_persona


flujo de partido
BEGIN
  1) Crear partido (si no existe)
  2) Crear participan_partido
  3) Crear goles / tarjetas
  4) Marcar partido TERMINADO
  5) Recalcular posiciones
COMMIT


obtener integrantes para los partidos 

SELECT
    pi.id_plantel_integrante,
    per.id_persona,
    per.nombre,
    per.apellido,
    pi.rol_en_plantel,
    pi.numero_camiseta
FROM inscripcion_torneo it
JOIN equipo e
    ON e.id_equipo = it.id_equipo
JOIN plantel p
    ON p.id_equipo = e.id_equipo
    AND p.activo = true
JOIN plantel_integrante pi
    ON pi.id_plantel = p.id_plantel
JOIN persona per
    ON per.id_persona = pi.id_persona
WHERE it.id_inscripcion = 4
  AND pi.fecha_baja IS NULL
ORDER BY pi.numero_camiseta;

modo de uso vistas tarjetas. 

Vista para tarjetas con detalles:

Tarjetas de un torneo:

SELECT *
FROM vw_tarjetas_detalle_torneo
WHERE id_torneo = 1
ORDER BY apellido_persona, fecha_partido, minuto;


Tarjetas de una persona:

SELECT *
FROM vw_tarjetas_detalle_torneo
WHERE id_persona = 23;


vista tarjetas_acumuladas 

-- filtramos por torneo
SELECT *
FROM vw_tarjetas_acumuladas_torneo
WHERE id_torneo = 1
ORDER BY total_amarillas DESC;

-- filtrar por acumulacion
SELECT *
FROM vw_tarjetas_acumuladas_torneo
WHERE total_amarillas >= 3;


-- personas con sus roles y fichajes
-- Para mostrar los datos exactamente como los necesitas:
SELECT 
    nombre,
    apellido,
    rol,
    club_asignado
FROM v_personas_frontend
ORDER BY apellido, nombre;

-- O agrupados por persona:
SELECT 
    p.nombre || ' ' || p.apellido AS persona,
    STRING_AGG(
        '• ' || vf.rol || ' → ' || vf.club_asignado,
        E'\n  '
        ORDER BY vf.rol
    ) AS roles_y_clubes
FROM persona p
JOIN v_personas_frontend vf ON p.id_persona = vf.id_persona
GROUP BY p.id_persona, p.nombre, p.apellido
ORDER BY p.apellido, p.nombre;